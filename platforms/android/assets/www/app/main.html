<script id="digits-sdk" src="https://cdn.digits.com/1/sdk.js" async></script>
<script type="text/javascript" src="scripts/angular/angular.min.js"></script>
<script type="text/javascript" src="scripts/angular/angular-route.min.js"></script>
<script type="text/javascript" src="scripts/angular/angular-translate.js"></script>

<link rel="stylesheet" type="text/css" href="contents/css/jquery.mobile-1.4.5.min.css">

<script type="text/javascript" src="scripts/ui-bootstrap-tpls-0.11.2.min.js"></script>
<script type="text/javascript" src="contents/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="contents/bootstrap/js/bootstrap-lightbox.js"></script>

<style>
    .home img{
        width: 90%;
        padding: 3px 0px;
    }
</style>
<div>
    <div id="main">
        <div data-role="page" style="display:block;">
           
            <div class="wrapper home">
                <br>
                <div class="row"> 
                                <div class="col-lg-1 col-sm-1 col-md-1 col-xs-1"> </div>       

                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" >
                        <center>
                            <!-- <div onclick="window.open('tel:', '_system', 'location=yes')"> -->
                            <div onclick="carrega('app/chamar.html')">

                            <img src="contents/img/chamdas.png" />
                        </div>
                        </center>
                    </div>
                    <div >
                        <center>
                            <iframe class="col-lg-5 col-sm-5 col-md-5 col-xs-5" scrolling="no" frameborder="no" clocktype="html5" style="overflow:hidden;border:0;margin:0;padding:0;width:180px;height:60px;"src="http://www.clocklink.com/html5embed.php?clock=004&timezone=local&color=green&size=180&Title=&Message=&Target=&From=2015,1,1,0,0,0&Color=green"></iframe>

                        </center>
                    </div>
                   
                </div>
                <div class="row">
                                <div class="col-lg-1 col-sm-1 col-md-1 col-xs-1"> </div>       

                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" onclick="carrega('app/sms.html')">
                        <center>
                            <img src="contents/img/msgs.png">
                        </center>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" onclick="carrega('app/contatos.html')">
                        <center>
                              <img src="contents/img/contatos.png" />
                        </center>
                    </div>
                    
                </div>
                <div class="row">
                                <div class="col-lg-1 col-sm-1 col-md-1 col-xs-1"> </div>       

                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" onclick="carrega('app/aplicativos.html')">
                        <center>
                            <img src="contents/img/aplicativos.png" />
                        </center>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" onclick="carrega('app/tutorial.html')">
                        <center>
                            <img src="contents/img/tutorial.jpg">
                        </center>
                    </div>
                   
                </div>
                <div class="row">
                                <div class="col-lg-1 col-sm-1 col-md-1 col-xs-1"> </div>       

                    <div id = "divFav1" class="col-lg-5 col-sm-5 col-md-5 col-xs-5" >
                        <center>
                            <img id = "imaFav1" src="contents/img/user-2.png" onclick="contact1.pick1()">
                            <!-- <p>Aline</p> -->
                        </center>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5 col-xs-5" >
                        <center>
                            <img id = "imaFav2" src="contents/img/user-2.png" onclick="contact2.pick2()">
                        </center>
                    </div>
                    
                </div>

                <div class="row" style="margin-top: 10px;">
                    
                    <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12 btn-group">
                        <center>
                            <!-- <div onclick="window.open('tel:555-555-555', '_system', 'location=yes')"> -->
                            <div onclick="phonedialer.dial('191')">
                            <!-- <div onclick="app.call()">     -->
                                <img style="" src="contents/img/sos.png" />
                           </div>
                        </center>
                    </div>
                   
                </div>
                
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
var number = "";

var contact1 = {
    pick1: function() {  
    var src= document.getElementById('imaFav1').src;
    if( src.indexOf("user-2") > -1){  
        window.plugins.ContactChooser.chooseContact(function (contactInfo) {
        setTimeout(function () { // use timeout to fix iOS alert problem
            // alert(contactInfo.displayName + " " + contactInfo.email + " " + contactInfo.phoneNumber);
            // document.getElementById('numberTxt').textContent = contactInfo.phoneNumber;
            var telefone =  contactInfo.phoneNumber;
            var nome = contactInfo.displayName;
            // alert(nome);
            // find all contacts with 'Bob' in any name field
            var options      = new ContactFindOptions();
            options.filter   = nome;
            options.multiple = false;
            // options.desiredFields = [navigator.contacts.fieldType.id];
            var fields       = [navigator.contacts.fieldType.displayName, navigator.contacts.fieldType.name, navigator.contacts.fieldType.nickname];
            navigator.contacts.find(fields, onSuccess, onError, options);

        }, 0);
    });
    } else {
        phonedialer.dial(number);
    }
    
    }
};

var contact2 = {
    pick2: function() {  
    var src= document.getElementById('imaFav2').src;
    if( src.indexOf("user-2") > -1){  
        window.plugins.ContactChooser.chooseContact(function (contactInfo) {
        setTimeout(function () { // use timeout to fix iOS alert problem
            // alert(contactInfo.displayName + " " + contactInfo.email + " " + contactInfo.phoneNumber);
            // document.getElementById('numberTxt').textContent = contactInfo.phoneNumber;
            var telefone =  contactInfo.phoneNumber;
            var nome = contactInfo.displayName;
            // alert(nome);
            // find all contacts with 'Bob' in any name field
            var options      = new ContactFindOptions();
            options.filter   = nome;
            options.multiple = false;
            // options.desiredFields = [navigator.contacts.fieldType.id];
            var fields       = [navigator.contacts.fieldType.displayName, navigator.contacts.fieldType.name, navigator.contacts.fieldType.nickname];
            navigator.contacts.find(fields, onSuccess2, onError, options);

        }, 0);
    });
    } else {
        phonedialer.dial(number);
    }
    
    }
};

function showContact (contact) {
    // alert("oi");
    alert(JSON.stringify(contact));
}

function onSuccess(contacts) {
            // alert('Found ' + contacts.length + ' contacts.');

            
            alert(contacts[0].displayName + contacts[0].photos);
            var foto = contacts[0].photos[0].value;
            number = contacts[0].phoneNumbers[0].value;
            document.getElementById('imaFav1').src = foto;
            document.getElementById('imaFav1').value === "0"
// navigator.contacts.pickContact(showContact(contacts[0]), onError);
            // alert(contacts[0].displayName);
        }

function onSuccess2(contacts) {
            // alert('Found ' + contacts.length + ' contacts.');

            
            alert(contacts[0].displayName + contacts[0].photos);
            var foto = contacts[0].photos[0].value;
            number = contacts[0].phoneNumbers[0].value;
            document.getElementById('imaFav2').src = foto;
            document.getElementById('imaFav2').value === "0"
// navigator.contacts.pickContact(showContact(contacts[0]), onError);
            // alert(contacts[0].displayName);
        }

function onError(contactError) {
            alert('onError!');
        }
</script>
